import{a as e,r as t,m as s,o as a,c as l,b as r,d as c,e as i,t as o,F as n,j as d,g as u,l as x,p as m,q as p,v,G as y,y as f}from"./index-CBMkPS47.js";const g={class:"min-h-screen py-8"},b={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},h={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},k={class:"card"},w={class:"flex items-center"},A={class:"text-2xl font-bold"},C={class:"card"},j={class:"flex items-center"},I={class:"text-2xl font-bold"},D={class:"card"},E={class:"flex items-center"},P={class:"text-2xl font-bold"},R={class:"card"},U={class:"flex items-center"},S={class:"text-2xl font-bold"},_={class:"mb-8"},G={class:"border-b border-gray-700"},V={class:"-mb-px flex space-x-8"},q=["onClick"],J={class:"space-y-8"},O={key:0,class:"card"},L={key:0,class:"text-center py-8"},$={key:1,class:"overflow-x-auto"},z={class:"w-full"},T={class:"py-3 px-4 font-semibold"},F={class:"py-3 px-4 font-mono text-sm text-gray-400"},N={class:"py-3 px-4 text-gray-400"},M={class:"py-3 px-4"},W=["onClick"],B=["onClick"],H={key:1,class:"card"},K={class:"flex justify-between items-center mb-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},X={class:"flex items-center justify-between"},Y={class:"font-mono text-sm"},Z=["onClick"],ee={key:2,class:"card"},te={key:0,class:"text-center py-8"},se={key:1,class:"overflow-x-auto"},ae={class:"w-full"},le={class:"py-3 px-4 font-mono text-sm"},re={class:"py-3 px-4"},ce={class:"py-3 px-4 font-semibold text-craftar-400"},ie={class:"py-3 px-4"},oe={class:"py-3 px-4 text-gray-400"},ne={class:"py-3 px-4"},de=["onClick"],ue={key:3,class:"card"},xe={class:"flex justify-between items-center mb-6"},me={key:0,class:"text-center py-8"},pe={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ve={class:"aspect-square bg-gray-700 rounded-lg mb-4 flex items-center justify-center relative overflow-hidden"},ye=["src","alt"],fe={key:1,class:"fas fa-cube text-4xl text-gray-500"},ge={class:"flex items-center justify-between mb-4"},be={class:"font-semibold"},he={class:"text-gray-400 text-sm mb-4"},ke={class:"flex justify-between items-center mb-4"},we={class:"text-craftar-400 font-bold"},Ae={class:"text-gray-500 text-sm"},Ce={class:"flex gap-2"},je=["onClick"],Ie=["onClick"],De={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-[9998] flex items-center justify-center"},Ee={class:"bg-gray-800 rounded-lg p-6 w-full max-w-md"},Pe={class:"space-y-4"},Re=["value"],Ue={class:"flex gap-3 mt-6"},Se={__name:"Admin",setup(Se){e();const _e=t("players"),Ge=t(!1),Ve=t(!1),qe=t(!1),Je=t(!1),Oe=t(!1),Le=s({totalUsers:0,totalOrders:0,totalRevenue:0,activeProducts:0}),$e=t([]),ze=t([]),Te=t([]),Fe=t([]),Ne=t(""),Me=t(""),We=t(1),Be=[{id:"players",name:"Jugadores",icon:"fas fa-users"},{id:"items",name:"Items",icon:"fas fa-cube"},{id:"orders",name:"Órdenes",icon:"fas fa-shopping-cart"},{id:"products",name:"Productos",icon:"fas fa-store"}],He=e=>new Date(e).toLocaleDateString("es-AR"),Ke=e=>({pending:"Pendiente",paid:"Pagado",delivered:"Entregado",cancelled:"Cancelado"}[e]||e),Qe=async()=>{Ge.value=!0;try{const e=await y.get("/api/players");$e.value=e.data}catch(e){console.error("Error loading players:",e)}finally{Ge.value=!1}},Xe=async()=>{Ve.value=!0;try{const e=await y.get("/api/orders");ze.value=e.data}catch(e){console.error("Error loading orders:",e)}finally{Ve.value=!1}},Ye=async()=>{var e,t;try{(await y.post("/api/add-item",{uuid:Ne.value,item:Me.value,amount:We.value})).data.success&&(alert("Item enviado exitosamente al servidor"),Je.value=!1,Ne.value="",Me.value="",We.value=1)}catch(s){alert("Error al enviar item: "+((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||s.message))}};return a(()=>{Qe(),Xe(),(async()=>{qe.value=!0;try{const e=await y.get("/api/shop/products");Te.value=e.data.products}catch(e){console.error("Error loading products:",e)}finally{qe.value=!1}})(),(async()=>{try{const e=await y.get("/api/items");Fe.value=e.data}catch(e){console.error("Error loading minecraft items:",e)}})(),Le.totalUsers=$e.value.length,Le.totalOrders=ze.value.length,Le.totalRevenue=ze.value.reduce((e,t)=>e+t.totalAmount,0),Le.activeProducts=Te.value.filter(e=>e.isActive).length}),(e,t)=>(r(),l("div",g,[c("div",b,[t[33]||(t[33]=c("div",{class:"mb-8"},[c("h1",{class:"text-3xl font-bold gradient-text mb-2"},"Panel de Administración"),c("p",{class:"text-gray-400"},"Gestiona el servidor y los usuarios de CraftAR")],-1)),c("div",h,[c("div",k,[c("div",w,[t[8]||(t[8]=c("div",{class:"w-12 h-12 bg-craftar-600 rounded-lg flex items-center justify-center mr-4"},[c("i",{class:"fas fa-users text-white text-xl"})],-1)),c("div",null,[t[7]||(t[7]=c("p",{class:"text-gray-400 text-sm"},"Usuarios Registrados",-1)),c("p",A,o(Le.totalUsers),1)])])]),c("div",C,[c("div",j,[t[10]||(t[10]=c("div",{class:"w-12 h-12 bg-minecraft-green rounded-lg flex items-center justify-center mr-4"},[c("i",{class:"fas fa-shopping-cart text-white text-xl"})],-1)),c("div",null,[t[9]||(t[9]=c("p",{class:"text-gray-400 text-sm"},"Órdenes Totales",-1)),c("p",I,o(Le.totalOrders),1)])])]),c("div",D,[c("div",E,[t[12]||(t[12]=c("div",{class:"w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center mr-4"},[c("i",{class:"fas fa-dollar-sign text-white text-xl"})],-1)),c("div",null,[t[11]||(t[11]=c("p",{class:"text-gray-400 text-sm"},"Ingresos Totales",-1)),c("p",P,"$"+o(Le.totalRevenue.toLocaleString("es-AR")),1)])])]),c("div",R,[c("div",U,[t[14]||(t[14]=c("div",{class:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mr-4"},[c("i",{class:"fas fa-cube text-white text-xl"})],-1)),c("div",null,[t[13]||(t[13]=c("p",{class:"text-gray-400 text-sm"},"Productos Activos",-1)),c("p",S,o(Le.activeProducts),1)])])])]),c("div",_,[c("div",G,[c("nav",V,[(r(),l(n,null,d(Be,e=>c("button",{key:e.id,onClick:t=>_e.value=e.id,class:f(["py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-300",_e.value===e.id?"border-craftar-500 text-craftar-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"])},[c("i",{class:f(e.icon+" mr-2")},null,2),u(" "+o(e.name),1)],10,q)),64))])])]),c("div",J,["players"===_e.value?(r(),l("div",O,[c("div",{class:"flex justify-between items-center mb-6"},[t[16]||(t[16]=c("h2",{class:"text-xl font-semibold"},"Gestión de Jugadores",-1)),c("button",{onClick:Qe,class:"btn-secondary"},[...t[15]||(t[15]=[c("i",{class:"fas fa-sync-alt mr-2"},null,-1),u(" Actualizar ",-1)])])]),Ge.value?(r(),l("div",L,[...t[17]||(t[17]=[c("div",{class:"spinner mx-auto mb-4"},null,-1),c("p",{class:"text-gray-400"},"Cargando jugadores...",-1)])])):(r(),l("div",$,[c("table",z,[t[20]||(t[20]=c("thead",null,[c("tr",{class:"border-b border-gray-700"},[c("th",{class:"text-left py-3 px-4"},"Nombre"),c("th",{class:"text-left py-3 px-4"},"UUID"),c("th",{class:"text-left py-3 px-4"},"Última Conexión"),c("th",{class:"text-left py-3 px-4"},"Acciones")])],-1)),c("tbody",null,[(r(!0),l(n,null,d($e.value,e=>(r(),l("tr",{key:e.uuid,class:"border-b border-gray-800 hover:bg-gray-800/50"},[c("td",T,o(e.name),1),c("td",F,o(e.uuid.slice(0,8))+"...",1),c("td",N,o(He(e.lastSeen)),1),c("td",M,[c("button",{onClick:t=>(e=>{console.log("View inventory for:",e)})(e),class:"btn-secondary text-sm mr-2"},[...t[18]||(t[18]=[c("i",{class:"fas fa-box mr-1"},null,-1),u(" Inventario ",-1)])],8,W),c("button",{onClick:t=>(e=>{Ne.value=e.uuid,Je.value=!0})(e),class:"btn-primary text-sm"},[...t[19]||(t[19]=[c("i",{class:"fas fa-gift mr-1"},null,-1),u(" Dar Item ",-1)])],8,B)])]))),128))])])]))])):i("",!0),"items"===_e.value?(r(),l("div",H,[c("div",K,[t[22]||(t[22]=c("h2",{class:"text-xl font-semibold"},"Gestión de Items",-1)),c("button",{onClick:t[0]||(t[0]=e=>Je.value=!0),class:"btn-primary"},[...t[21]||(t[21]=[c("i",{class:"fas fa-plus mr-2"},null,-1),u(" Dar Item a Jugador ",-1)])])]),c("div",Q,[(r(!0),l(n,null,d(Fe.value.slice(0,30),e=>(r(),l("div",{key:e,class:"p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors duration-300"},[c("div",X,[c("span",Y,o(e),1),c("button",{onClick:t=>(e=>{Me.value=e,Je.value=!0})(e),class:"text-craftar-400 hover:text-craftar-300"},[...t[23]||(t[23]=[c("i",{class:"fas fa-plus"},null,-1)])],8,Z)])]))),128))])])):i("",!0),"orders"===_e.value?(r(),l("div",ee,[c("div",{class:"flex justify-between items-center mb-6"},[t[25]||(t[25]=c("h2",{class:"text-xl font-semibold"},"Gestión de Órdenes",-1)),c("button",{onClick:Xe,class:"btn-secondary"},[...t[24]||(t[24]=[c("i",{class:"fas fa-sync-alt mr-2"},null,-1),u(" Actualizar ",-1)])])]),Ve.value?(r(),l("div",te,[...t[26]||(t[26]=[c("div",{class:"spinner mx-auto mb-4"},null,-1),c("p",{class:"text-gray-400"},"Cargando órdenes...",-1)])])):(r(),l("div",se,[c("table",ae,[t[28]||(t[28]=c("thead",null,[c("tr",{class:"border-b border-gray-700"},[c("th",{class:"text-left py-3 px-4"},"ID"),c("th",{class:"text-left py-3 px-4"},"Usuario"),c("th",{class:"text-left py-3 px-4"},"Total"),c("th",{class:"text-left py-3 px-4"},"Estado"),c("th",{class:"text-left py-3 px-4"},"Fecha"),c("th",{class:"text-left py-3 px-4"},"Acciones")])],-1)),c("tbody",null,[(r(!0),l(n,null,d(ze.value,e=>{return r(),l("tr",{key:e._id,class:"border-b border-gray-800 hover:bg-gray-800/50"},[c("td",le,"#"+o(e._id.slice(-8)),1),c("td",re,o(e.userId.username),1),c("td",ce,"$"+o(e.totalAmount.toLocaleString("es-AR")),1),c("td",ie,[c("span",{class:f([(s=e.status,{pending:"bg-yellow-500",paid:"bg-blue-500",delivered:"bg-green-500",cancelled:"bg-red-500"}[s]||"bg-gray-500"),"px-2 py-1 rounded-full text-xs"])},o(Ke(e.status)),3)]),c("td",oe,o(He(e.createdAt)),1),c("td",ne,[c("button",{onClick:t=>(e=>{console.log("View order:",e)})(e),class:"btn-secondary text-sm"},[...t[27]||(t[27]=[c("i",{class:"fas fa-eye mr-1"},null,-1),u(" Ver ",-1)])],8,de)])]);var s}),128))])])]))])):i("",!0),"products"===_e.value?(r(),l("div",ue,[c("div",xe,[t[30]||(t[30]=c("h2",{class:"text-xl font-semibold"},"Gestión de Productos",-1)),c("button",{onClick:t[1]||(t[1]=e=>Oe.value=!0),class:"btn-primary"},[...t[29]||(t[29]=[c("i",{class:"fas fa-plus mr-2"},null,-1),u(" Agregar Producto ",-1)])])]),qe.value?(r(),l("div",me,[...t[31]||(t[31]=[c("div",{class:"spinner mx-auto mb-4"},null,-1),c("p",{class:"text-gray-400"},"Cargando productos...",-1)])])):(r(),l("div",pe,[(r(!0),l(n,null,d(Te.value,e=>(r(),l("div",{key:e._id,class:"bg-gray-800 rounded-lg p-6 hover:bg-gray-700 transition-colors duration-300"},[c("div",ve,[e.image?(r(),l("img",{key:0,src:e.image,alt:e.name,class:"w-full h-full object-cover",onError:t[2]||(t[2]=e=>{e.target.style.display="none"})},null,40,ye)):(r(),l("i",fe))]),c("div",ge,[c("h3",be,o(e.name),1),c("span",{class:f([e.isActive?"text-green-400":"text-red-400","text-sm"])},o(e.isActive?"Activo":"Inactivo"),3)]),c("p",he,o(e.description),1),c("div",ke,[c("span",we,"$"+o(e.price.toLocaleString("es-AR")),1),c("span",Ae,o(e.category),1)]),c("div",Ce,[c("button",{onClick:t=>(e=>{console.log("Edit product:",e)})(e),class:"flex-1 btn-secondary text-sm"},[...t[32]||(t[32]=[c("i",{class:"fas fa-edit mr-1"},null,-1),u(" Editar ",-1)])],8,je),c("button",{onClick:t=>(async e=>{try{await y.put(`/api/shop/products/${e._id}`,{isActive:!e.isActive}),e.isActive=!e.isActive}catch(t){console.error("Error updating product:",t)}})(e),class:f([e.isActive?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700","flex-1 text-white px-3 py-2 rounded-lg text-sm transition-colors duration-300"])},[c("i",{class:f([e.isActive?"fas fa-pause":"fas fa-play","mr-1"])},null,2),u(" "+o(e.isActive?"Desactivar":"Activar"),1)],10,Ie)])]))),128))]))])):i("",!0)])]),Je.value?(r(),l("div",De,[c("div",Ee,[t[39]||(t[39]=c("h3",{class:"text-xl font-semibold mb-4"},"Dar Item a Jugador",-1)),c("form",{onSubmit:x(Ye,["prevent"])},[c("div",Pe,[c("div",null,[t[35]||(t[35]=c("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Jugador",-1)),m(c("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>Ne.value=e),required:"",class:"input-field"},[t[34]||(t[34]=c("option",{value:""},"Seleccionar jugador",-1)),(r(!0),l(n,null,d($e.value,e=>(r(),l("option",{key:e.uuid,value:e.uuid},o(e.name),9,Re))),128))],512),[[p,Ne.value]])]),c("div",null,[t[36]||(t[36]=c("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Item",-1)),m(c("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>Me.value=e),type:"text",required:"",class:"input-field",placeholder:"DIAMOND_SWORD"},null,512),[[v,Me.value]])]),c("div",null,[t[37]||(t[37]=c("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Cantidad",-1)),m(c("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>We.value=e),type:"number",required:"",min:"1",class:"input-field",placeholder:"1"},null,512),[[v,We.value,void 0,{number:!0}]])])]),c("div",Ue,[c("button",{type:"button",onClick:t[6]||(t[6]=e=>Je.value=!1),class:"flex-1 btn-secondary"}," Cancelar "),t[38]||(t[38]=c("button",{type:"submit",class:"flex-1 btn-primary"},[c("i",{class:"fas fa-gift mr-2"}),u(" Dar Item ")],-1))])],32)])])):i("",!0)]))}};export{Se as default};
