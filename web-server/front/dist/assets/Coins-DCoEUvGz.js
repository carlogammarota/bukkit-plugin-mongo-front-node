import{d as e,r as a,H as s,k as t,o as r,D as l,c as o,b as n,e as i,f as c,g as d,t as u,u as g,l as m,x as p,y as x,F as f,h as v,q as b,n as y}from"./index-pv9O3sN3.js";const h=e("coins",()=>{const e=a(!1),t=a(null),r=a([]);return{loading:e,error:t,transactions:r,getBalance:async()=>{var a,r;e.value=!0,t.value=null;try{return{success:!0,data:(await s.get("/api/coins/balance")).data}}catch(l){return t.value=(null==(r=null==(a=l.response)?void 0:a.data)?void 0:r.error)||"Error al obtener monedas",{success:!1,error:t.value}}finally{e.value=!1}},depositCoins:async a=>{var r,l;e.value=!0,t.value=null;try{return{success:!0,data:(await s.post("/api/coins/deposit",{amount:a})).data}}catch(o){return t.value=(null==(l=null==(r=o.response)?void 0:r.data)?void 0:l.error)||"Error al cargar monedas",{success:!1,error:t.value}}finally{e.value=!1}},getTransactions:async()=>{var a,l;e.value=!0,t.value=null;try{const e=await s.get("/api/coins/transactions");return r.value=e.data,{success:!0,data:e.data}}catch(o){return t.value=(null==(l=null==(a=o.response)?void 0:a.data)?void 0:l.error)||"Error al obtener transacciones",{success:!1,error:t.value}}finally{e.value=!1}},clearError:()=>{t.value=null}}}),w={class:"min-h-screen bg-gray-900 py-8"},k={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},C={class:"bg-gradient-to-r from-yellow-600 to-yellow-500 rounded-xl p-6 mb-8 shadow-xl"},A={class:"flex items-center justify-between"},S={class:"text-3xl font-bold text-white"},E={class:"grid md:grid-cols-2 gap-6 mb-8"},j={class:"bg-gray-800 rounded-xl p-6"},M={class:"space-y-4"},L={class:"space-y-3"},P={class:"grid grid-cols-3 gap-2"},R=["disabled"],$={key:0,class:"fas fa-spinner fa-spin mr-2"},D={key:1,class:"fas fa-credit-card mr-2"},T={class:"bg-gray-800 rounded-xl p-6"},_={class:"flex items-center justify-between mb-6"},z=["disabled"],K={key:0,class:"fas fa-spinner fa-spin"},U={key:1,class:"fas fa-sync-alt"},q={key:0,class:"text-center py-8"},H={key:1,class:"text-center py-8"},B={key:2,class:"space-y-3"},F={class:"flex items-center"},G={class:"text-white font-medium"},I={class:"text-gray-400 text-sm"},N={class:"text-right"},V={class:"text-center"},J={class:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 mb-6"},O={class:"text-green-400 font-semibold"},Q={__name:"Coins",setup(e){const s=l(),Q=t(),W=h(),X=a(1e3),Y=a([]),Z=a(!1),ee=async()=>{if(!X.value||X.value<100)return void alert("El monto mÃ­nimo es $100 ARS");console.log("Enviando cantidad:",X.value);const e=await W.depositCoins(X.value);e.success?window.open(e.data.paymentUrl,"_blank"):alert("Error al crear la carga de monedas: "+e.error)},ae=async()=>{const e=await W.getTransactions();e.success&&(Y.value=e.data)};return r(async()=>{await ae(),"success"===s.query.payment&&(console.log("Carga de monedas exitosa"),Z.value=!0,await Q.fetchUserData(),window.history.replaceState({},document.title,"/dashboard/wallet"))}),(e,a)=>(n(),o("div",w,[i("div",k,[a[17]||(a[17]=i("div",{class:"mb-8"},[i("h1",{class:"text-3xl font-bold text-white mb-2"},[i("i",{class:"fas fa-coins text-yellow-500 mr-3"}),d(" Mis Monedas ")]),i("p",{class:"text-gray-400"},"Gestiona tus monedas y realiza compras en la tienda")],-1)),i("div",C,[i("div",A,[i("div",null,[a[7]||(a[7]=i("h2",{class:"text-2xl font-bold text-white mb-2"},"Saldo Actual",-1)),i("p",S,u(g(Q).userCoins.toLocaleString("es-AR"))+" monedas ",1)]),a[8]||(a[8]=i("div",{class:"text-6xl opacity-20"},[i("i",{class:"fas fa-coins"})],-1))])]),i("div",E,[i("div",j,[a[10]||(a[10]=i("h3",{class:"text-xl font-semibold text-white mb-4"},[i("i",{class:"fas fa-plus-circle text-green-500 mr-2"}),d(" Cargar Monedas ")],-1)),a[11]||(a[11]=i("p",{class:"text-gray-400 mb-4"},"Agrega monedas a tu cuenta usando MercadoPago",-1)),i("div",M,[i("div",null,[a[9]||(a[9]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Cantidad a cargar ",-1)),i("div",L,[p(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>X.value=e),type:"number",min:"100",step:"100",class:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-2 focus:ring-craftar-500 focus:border-transparent",placeholder:"1000"},null,512),[[x,X.value]]),i("div",P,[i("button",{onClick:a[1]||(a[1]=e=>X.value=1e3),class:"px-3 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg transition-all duration-300 text-sm font-semibold shadow-md hover:shadow-lg transform hover:scale-105"}," ðŸ’° $1K "),i("button",{onClick:a[2]||(a[2]=e=>X.value=5e3),class:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-300 text-sm font-semibold shadow-md hover:shadow-lg transform hover:scale-105"}," ðŸ’Ž $5K "),i("button",{onClick:a[3]||(a[3]=e=>X.value=1e4),class:"px-3 py-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg transition-all duration-300 text-sm font-semibold shadow-md hover:shadow-lg transform hover:scale-105"}," ðŸ‘‘ $10K ")])])]),i("button",{onClick:ee,disabled:!X.value||X.value<100||g(W).loading,class:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center"},[g(W).loading?(n(),o("i",$)):(n(),o("i",D)),d(" "+u(g(W).loading?"Procesando...":"Cargar Monedas"),1)],8,R)])]),a[12]||(a[12]=m('<div class="bg-gray-800 rounded-xl p-6"><h3 class="text-xl font-semibold text-white mb-4"><i class="fas fa-info-circle text-blue-500 mr-2"></i> InformaciÃ³n </h3><div class="space-y-3 text-gray-300"><div class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i><span>Las monedas se cargan instantÃ¡neamente despuÃ©s del pago</span></div><div class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i><span>Puedes usar tus monedas para comprar en la tienda</span></div><div class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i><span>Los pagos son seguros con MercadoPago</span></div><div class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i><span>Monto mÃ­nimo de carga: $100 ARS</span></div></div></div>',1))]),i("div",T,[i("div",_,[a[13]||(a[13]=i("h3",{class:"text-xl font-semibold text-white"},[i("i",{class:"fas fa-history text-purple-500 mr-2"}),d(" Historial de Transacciones ")],-1)),i("button",{onClick:ae,disabled:g(W).loading,class:"text-craftar-400 hover:text-craftar-300 transition-colors"},[g(W).loading?(n(),o("i",K)):(n(),o("i",U))],8,z)]),g(W).loading&&0===Y.value.length?(n(),o("div",q,[...a[14]||(a[14]=[i("i",{class:"fas fa-spinner fa-spin text-4xl text-gray-600 mb-4"},null,-1),i("p",{class:"text-gray-400"},"Cargando transacciones...",-1)])])):0===Y.value.length?(n(),o("div",H,[...a[15]||(a[15]=[i("i",{class:"fas fa-history text-4xl text-gray-600 mb-4"},null,-1),i("p",{class:"text-gray-400"},"No tienes transacciones aÃºn",-1)])])):(n(),o("div",B,[(n(!0),o(f,null,v(Y.value,e=>{return n(),o("div",{key:e._id,class:"flex items-center justify-between p-4 bg-gray-700 rounded-lg"},[i("div",F,[i("div",{class:y(["w-10 h-10 rounded-full flex items-center justify-center mr-4",{"bg-green-600":"deposit"===e.type,"bg-red-600":"payment"===e.type,"bg-blue-600":"refund"===e.type}])},[i("i",{class:y(["fas text-white",{"fa-plus":"deposit"===e.type,"fa-minus":"payment"===e.type,"fa-undo":"refund"===e.type}])},null,2)],2),i("div",null,[i("p",G,u(e.description),1),i("p",I,u((s=e.createdAt,new Date(s).toLocaleDateString("es-AR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))),1)])]),i("div",N,[i("p",{class:y(["font-semibold",{"text-green-400":e.amount>0,"text-red-400":e.amount<0}])},u(e.amount>0?"+":"")+u(e.amount.toLocaleString("es-AR")),3),a[16]||(a[16]=i("p",{class:"text-gray-400 text-sm"},"monedas",-1))])]);var s}),128))]))])]),Z.value?(n(),o("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center",onClick:a[6]||(a[6]=e=>Z.value=!1)},[i("div",{class:"bg-gray-800 rounded-2xl p-8 max-w-md mx-4 shadow-2xl border border-green-500/50",onClick:a[5]||(a[5]=b(()=>{},["stop"]))},[i("div",V,[a[18]||(a[18]=i("div",{class:"text-6xl mb-4"},"âœ…",-1)),a[19]||(a[19]=i("h3",{class:"text-2xl font-bold text-white mb-4"},"Â¡Pago Exitoso!",-1)),a[20]||(a[20]=i("p",{class:"text-gray-300 mb-6"}," Tu pago ha sido procesado correctamente y las monedas han sido cargadas a tu cuenta. ",-1)),i("div",J,[i("p",O," ðŸ’° Saldo actualizado: "+u(g(Q).userCoins.toLocaleString("es-AR"))+" monedas ",1)]),i("button",{onClick:a[4]||(a[4]=e=>Z.value=!1),class:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl"}," Â¡Perfecto! ")])])])):c("",!0)]))}};export{Q as default};
