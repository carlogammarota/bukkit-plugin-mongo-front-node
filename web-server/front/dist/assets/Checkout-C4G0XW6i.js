import{j as e,k as a,r as s,E as t,o as l,A as r,c as o,b as c,e as n,u as i,m as d,w as u,p as m,F as f,h as x,q as p,f as g,n as y,x as v,J as b,g as h,t as w,C as k,l as S}from"./index-pv9O3sN3.js";const T={class:"min-h-screen py-8"},j={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},P={key:0,class:"text-center py-12"},A={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},C={class:"lg:col-span-2"},R={class:"card mb-6"},L={class:"space-y-4"},q={class:"flex items-center space-x-4"},M={class:"font-semibold"},Q={class:"text-gray-400 text-sm"},I={key:0,class:"mt-1"},$={class:"text-xs text-blue-400"},E={class:"text-right"},U={class:"font-semibold"},_={class:"text-gray-400 text-sm"},V={class:"card"},D={class:"mb-6"},F={class:"space-y-4"},G={class:"text-gray-400 text-sm"},z={key:0,class:"text-red-400 ml-2"},J={key:0,class:"space-y-4"},O={key:0,class:"bg-craftar-500/10 border border-craftar-500 rounded-lg p-4"},B={key:1,class:"bg-yellow-500/10 border border-yellow-500 rounded-lg p-4"},H={class:"flex items-center"},K={class:"text-gray-400 text-sm"},N={key:0,class:"text-green-400 ml-2"},W={key:1,class:"text-red-400 ml-2"},X={class:"mt-6"},Y={class:"flex items-start"},Z=["disabled"],ee={key:0,class:"flex items-center justify-center"},ae={key:1,class:"flex items-center justify-center"},se={key:0,class:"fas fa-credit-card mr-2"},te={key:1,class:"fas fa-coins mr-2"},le={key:2},re={key:3},oe={class:"space-y-6"},ce={class:"card"},ne={class:"space-y-3"},ie={key:0,class:"text-xs text-blue-400"},de={class:"border-t border-gray-700 pt-3"},ue={class:"flex justify-between text-sm mb-2"},me={class:"flex justify-between text-lg font-bold border-t border-gray-700 pt-3"},fe={class:"text-craftar-400"},xe={class:"card"},pe={class:"text-center mb-4"},ge={class:"text-2xl font-bold text-yellow-400"},ye={class:"space-y-2 text-sm"},ve={class:"flex justify-between"},be={class:"text-white"},he={class:"flex justify-between"},we={class:"mt-4 pt-4 border-t border-gray-700"},ke={__name:"Checkout",setup(ke){const Se=r(),Te=e(),je=a(),Pe=s("mercadopago"),Ae=s(!1),Ce=t(()=>Pe.value&&Ae.value),Re=async()=>{if(!Ce.value)return;const e=await Te.createOrder();if(!e.success)return void alert("Error al crear la orden: "+e.error);const a=await Te.processPayment(e.order.id,Pe.value);a.success?a.redirect?window.location.href=a.paymentUrl:(Te.clearCart(),Se.push("/dashboard?payment=success")):alert("Error al procesar el pago: "+a.error)};return l(()=>{0===Te.cart.length&&Se.push("/shop")}),(e,a)=>{const s=m("router-link");return c(),o("div",T,[n("div",j,[a[32]||(a[32]=n("div",{class:"text-center mb-8"},[n("h1",{class:"text-3xl font-bold gradient-text mb-2"},"Finalizar Compra"),n("p",{class:"text-gray-400"},"Revisa tu pedido y completa el pago")],-1)),0===i(Te).cart.length?(c(),o("div",P,[a[4]||(a[4]=n("i",{class:"fas fa-shopping-cart text-6xl text-gray-600 mb-4"},null,-1)),a[5]||(a[5]=n("h3",{class:"text-2xl font-semibold mb-2"},"Tu carrito está vacío",-1)),a[6]||(a[6]=n("p",{class:"text-gray-400 mb-6"},"Agrega algunos items antes de proceder al pago",-1)),d(s,{to:"/shop",class:"btn-primary"},{default:u(()=>[...a[3]||(a[3]=[n("i",{class:"fas fa-store mr-2"},null,-1),h(" Ir a la Tienda ",-1)])]),_:1})])):(c(),o("div",A,[n("div",C,[n("div",R,[a[9]||(a[9]=n("h2",{class:"text-xl font-semibold mb-6"},"Resumen del Pedido",-1)),n("div",L,[(c(!0),o(f,null,x(i(Te).cart,e=>(c(),o("div",{key:e.id,class:"flex items-center justify-between p-4 bg-gray-800 rounded-lg"},[n("div",q,[a[8]||(a[8]=n("div",{class:"w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center"},[n("i",{class:"fas fa-cube text-gray-500"})],-1)),n("div",null,[n("h3",M,w(e.name),1),n("p",Q,w(e.minecraftItem),1),e.defaultQuantity&&e.defaultQuantity>1?(c(),o("div",I,[n("span",$,[a[7]||(a[7]=n("i",{class:"fas fa-info-circle mr-1"},null,-1)),h(" "+w(e.quantity)+" unidad(es) × "+w(e.defaultQuantity)+" = "+w(e.quantity*e.defaultQuantity)+" total ",1)])])):g("",!0)])]),n("div",E,[n("p",U,"$"+w(e.price.toLocaleString("es-AR")),1),n("p",_,"x"+w(e.quantity),1)])]))),128))])]),n("div",V,[a[20]||(a[20]=n("h2",{class:"text-xl font-semibold mb-6"},"Información de Pago",-1)),n("form",{onSubmit:p(Re,["prevent"])},[n("div",D,[a[14]||(a[14]=n("label",{class:"block text-sm font-medium text-gray-300 mb-3"},"Método de Pago",-1)),n("div",F,[n("label",{class:y(["flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:border-craftar-500 transition-colors duration-300",{"border-craftar-500 bg-craftar-500/10":"mercadopago"===Pe.value}])},[v(n("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>Pe.value=e),type:"radio",value:"mercadopago",class:"sr-only"},null,512),[[b,Pe.value]]),a[10]||(a[10]=n("i",{class:"fas fa-credit-card text-2xl mr-3 text-craftar-400"},null,-1)),a[11]||(a[11]=n("div",null,[n("p",{class:"font-semibold text-white"},"MercadoPago"),n("p",{class:"text-gray-400 text-sm"},"Tarjetas, transferencias, efectivo")],-1))],2),n("label",{class:y(["flex items-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:border-yellow-500 transition-colors duration-300",{"border-yellow-500 bg-yellow-500/10":"coins"===Pe.value}])},[v(n("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>Pe.value=e),type:"radio",value:"coins",class:"sr-only"},null,512),[[b,Pe.value]]),a[13]||(a[13]=n("i",{class:"fas fa-coins text-2xl mr-3 text-yellow-500"},null,-1)),n("div",null,[a[12]||(a[12]=n("p",{class:"font-semibold text-white"},"Pagar con Monedas",-1)),n("p",G,[h(" Tienes "+w(i(je).userCoins.toLocaleString("es-AR"))+" monedas disponibles ",1),i(je).userCoins<i(Te).cartTotal?(c(),o("span",z," (Insuficientes) ")):g("",!0)])])],2)])]),Pe.value?(c(),o("div",J,["mercadopago"===Pe.value?(c(),o("div",O,[...a[15]||(a[15]=[n("div",{class:"flex items-center"},[n("i",{class:"fas fa-info-circle text-craftar-400 mr-3"}),n("div",null,[n("p",{class:"font-semibold text-white"},"Pago Seguro con MercadoPago"),n("p",{class:"text-gray-400 text-sm"},"Serás redirigido a MercadoPago para completar el pago de forma segura")])],-1)])])):g("",!0),"coins"===Pe.value?(c(),o("div",B,[n("div",H,[a[17]||(a[17]=n("i",{class:"fas fa-coins text-yellow-500 mr-3"},null,-1)),n("div",null,[a[16]||(a[16]=n("p",{class:"font-semibold text-white"},"Pago con Monedas",-1)),n("p",K,[h(" Se descontarán "+w(i(Te).cartTotal.toLocaleString("es-AR"))+" monedas de tu cuenta ",1),i(je).userCoins>=i(Te).cartTotal?(c(),o("span",N," ✓ Saldo suficiente ")):(c(),o("span",W," ✗ Saldo insuficiente "))])])])])):g("",!0)])):g("",!0),n("div",X,[n("label",Y,[v(n("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>Ae.value=e),type:"checkbox",required:"",class:"h-4 w-4 text-craftar-600 focus:ring-craftar-500 border-gray-600 rounded bg-gray-800 mt-1"},null,512),[[k,Ae.value]]),a[18]||(a[18]=n("span",{class:"ml-2 text-sm text-gray-300"},[h(" Acepto los "),n("a",{href:"#",class:"text-craftar-400 hover:text-craftar-300"},"Términos de Servicio"),h(" y confirmo que los items serán entregados en el servidor de Minecraft. ")],-1))])]),n("button",{type:"submit",disabled:!Ce.value||i(Te).loading||"coins"===Pe.value&&i(je).userCoins<i(Te).cartTotal,class:"w-full mt-6 btn-minecraft disabled:opacity-50 disabled:cursor-not-allowed"},[i(Te).loading?(c(),o("div",ee,[...a[19]||(a[19]=[n("div",{class:"spinner mr-2"},null,-1),h(" Procesando Pago... ",-1)])])):(c(),o("div",ae,["mercadopago"===Pe.value?(c(),o("i",se)):"coins"===Pe.value?(c(),o("i",te)):g("",!0),"mercadopago"===Pe.value?(c(),o("span",le," Pagar $"+w(i(Te).cartTotal.toLocaleString("es-AR")),1)):"coins"===Pe.value?(c(),o("span",re," Pagar con "+w(i(Te).cartTotal.toLocaleString("es-AR"))+" monedas ",1)):g("",!0)]))],8,Z)],32)])]),n("div",oe,[n("div",ce,[a[25]||(a[25]=n("h3",{class:"text-lg font-semibold mb-4"},"Resumen de Compra",-1)),n("div",ne,[(c(!0),o(f,null,x(i(Te).cart,e=>(c(),o("div",{key:e.id,class:"flex justify-between text-sm"},[n("div",null,[n("span",null,w(e.name)+" x"+w(e.quantity),1),e.defaultQuantity&&e.defaultQuantity>1?(c(),o("div",ie," ("+w(e.quantity*e.defaultQuantity)+" total) ",1)):g("",!0)]),n("span",null,"$"+w((e.price*e.quantity).toLocaleString("es-AR")),1)]))),128)),n("div",de,[n("div",ue,[a[21]||(a[21]=n("span",null,"Subtotal",-1)),n("span",null,"$"+w(i(Te).cartTotal.toLocaleString("es-AR")),1)]),a[23]||(a[23]=n("div",{class:"flex justify-between text-sm mb-2"},[n("span",null,"Impuestos"),n("span",null,"$0")],-1)),a[24]||(a[24]=n("div",{class:"flex justify-between text-sm mb-2"},[n("span",null,"Envío"),n("span",{class:"text-green-400"},"Gratis")],-1)),n("div",me,[a[22]||(a[22]=n("span",null,"Total",-1)),n("span",fe,"$"+w(i(Te).cartTotal.toLocaleString("es-AR")),1)])])])]),n("div",xe,[a[30]||(a[30]=n("h3",{class:"text-lg font-semibold mb-4"},[n("i",{class:"fas fa-coins text-yellow-500 mr-2"}),h(" Mis Monedas ")],-1)),n("div",pe,[n("p",ge,w(i(je).userCoins.toLocaleString("es-AR")),1),a[26]||(a[26]=n("p",{class:"text-gray-400 text-sm"},"monedas disponibles",-1))]),n("div",ye,[n("div",ve,[a[27]||(a[27]=n("span",{class:"text-gray-400"},"Costo total:",-1)),n("span",be,w(i(Te).cartTotal.toLocaleString("es-AR"))+" monedas",1)]),n("div",he,[a[28]||(a[28]=n("span",{class:"text-gray-400"},"Después del pago:",-1)),n("span",{class:y(i(je).userCoins>=i(Te).cartTotal?"text-green-400":"text-red-400")},w((i(je).userCoins-i(Te).cartTotal).toLocaleString("es-AR"))+" monedas ",3)])]),n("div",we,[d(s,{to:"/dashboard/coins",class:"text-yellow-400 hover:text-yellow-300 text-sm flex items-center justify-center"},{default:u(()=>[...a[29]||(a[29]=[n("i",{class:"fas fa-plus mr-2"},null,-1),h(" Cargar más monedas ",-1)])]),_:1})])]),a[31]||(a[31]=S('<div class="card"><h3 class="text-lg font-semibold mb-4">Información de Seguridad</h3><div class="space-y-3 text-sm text-gray-400"><div class="flex items-center"><i class="fas fa-shield-alt text-green-400 mr-2"></i><span>Pago 100% seguro</span></div><div class="flex items-center"><i class="fas fa-lock text-green-400 mr-2"></i><span>Datos encriptados</span></div><div class="flex items-center"><i class="fas fa-bolt text-green-400 mr-2"></i><span>Entrega instantánea</span></div><div class="flex items-center"><i class="fas fa-undo text-green-400 mr-2"></i><span>Garantía de devolución</span></div></div></div>',1))])]))])])}}};export{ke as default};
