import{k as e,r as a,s,E as t,o as l,c as r,b as n,e as i,f as o,u as c,g as d,t as u,q as m,x as f,y as p,B as x,n as b,l as v,m as g,w as y,p as w,A as h}from"./index-pv9O3sN3.js";const P={class:"min-h-screen py-8"},k={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},N={key:0,class:"bg-red-900/50 border border-red-500 rounded-lg p-4 mb-6"},U={key:1,class:"bg-blue-900/50 border border-blue-500 rounded-lg p-4 mb-6"},C={class:"text-sm text-gray-300"},E={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},I={class:"lg:col-span-2"},j={class:"card"},A={key:0,class:"bg-red-900/50 border border-red-500 rounded-lg p-4 mb-6"},M={class:"flex items-center"},V={class:"text-red-300"},L={key:1,class:"bg-green-900/50 border border-green-500 rounded-lg p-4 mb-6"},R={class:"flex items-center"},S={class:"text-green-300"},D={class:"space-y-6"},q={class:"relative"},z=["type"],B={class:"relative"},_=["type"],F={key:0},G={class:"relative"},O=["type"],T={key:1,class:"space-y-2"},Z={class:"flex items-center text-sm"},$={class:"flex items-center text-sm"},H=["disabled"],J={key:0,class:"flex items-center justify-center"},K={key:1,class:"flex items-center justify-center"},Q={class:"space-y-6"},W={class:"card"},X={class:"space-y-3 text-sm"},Y={class:"flex justify-between"},ee={class:"font-mono text-craftar-400"},ae={class:"flex justify-between"},se={class:"flex justify-between"},te={class:"flex justify-between"},le={class:"card"},re={class:"text-center"},ne={class:"text-3xl font-bold text-craftar-400 mb-2"},ie={class:"card border-red-500"},oe={class:"space-y-3"},ce={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-[9998] flex items-center justify-center"},de={class:"bg-gray-800 rounded-lg p-6 w-full max-w-md"},ue={class:"space-y-4"},me={class:"flex gap-3 mt-6"},fe=["disabled"],pe={__name:"Profile",setup(pe){h();const xe=e(),be=a(!1),ve=a(!1),ge=a(!1),ye=a(!1),we=a(""),he=a(""),Pe=a(""),ke=s({username:"",email:"",minecraftUsername:"",currentPassword:"",newPassword:"",confirmNewPassword:""}),Ne=t(()=>ke.username&&ke.email&&ke.currentPassword&&(!ke.newPassword||ke.newPassword===ke.confirmNewPassword)),Ue=t(()=>he.value&&"ELIMINAR"===Pe.value),Ce=e=>e?new Date(e).toLocaleDateString("es-AR"):"Nunca",Ee=async()=>{xe.clearError(),we.value="";const e={username:ke.username,email:ke.email,minecraftUsername:ke.minecraftUsername,currentPassword:ke.currentPassword};ke.newPassword&&(e.newPassword=ke.newPassword);(await xe.updateProfile(e)).success&&(we.value="Perfil actualizado exitosamente",ke.currentPassword="",ke.newPassword="",ke.confirmNewPassword="")},Ie=async()=>{if(Ue.value)try{alert("Función de eliminación de cuenta no implementada aún"),ye.value=!1}catch(e){console.error("Error deleting account:",e)}};return l(async()=>{xe.user?(ke.username=xe.user.username||"",ke.email=xe.user.email||"",ke.minecraftUsername=xe.user.minecraftUsername||""):(await xe.fetchUserProfile(),xe.user&&(ke.username=xe.user.username||"",ke.email=xe.user.email||"",ke.minecraftUsername=xe.user.minecraftUsername||"")),xe.clearError()}),(e,a)=>{const s=w("router-link");return n(),r("div",P,[i("div",k,[a[47]||(a[47]=i("div",{class:"mb-8"},[i("h1",{class:"text-3xl font-bold gradient-text mb-2"},"Mi Perfil"),i("p",{class:"text-gray-400"},"Gestiona tu información personal y configuración de cuenta")],-1)),c(xe).user?o("",!0):(n(),r("div",N,[...a[13]||(a[13]=[i("div",{class:"flex items-center"},[i("i",{class:"fas fa-exclamation-triangle text-red-400 mr-2"}),i("span",{class:"text-red-300"},"Error: No se pudo cargar la información del usuario")],-1)])])),c(xe).user?(n(),r("div",U,[a[19]||(a[19]=i("div",{class:"flex items-center mb-2"},[i("i",{class:"fas fa-info-circle text-blue-400 mr-2"}),i("span",{class:"text-blue-300 font-semibold"},"Debug: Información del Usuario")],-1)),i("div",C,[i("p",null,[a[14]||(a[14]=i("strong",null,"ID:",-1)),d(" "+u(c(xe).user.id||"No definido"),1)]),i("p",null,[a[15]||(a[15]=i("strong",null,"Username:",-1)),d(" "+u(c(xe).user.username||"No definido"),1)]),i("p",null,[a[16]||(a[16]=i("strong",null,"Email:",-1)),d(" "+u(c(xe).user.email||"No definido"),1)]),i("p",null,[a[17]||(a[17]=i("strong",null,"Role:",-1)),d(" "+u(c(xe).user.role||"No definido"),1)]),i("p",null,[a[18]||(a[18]=i("strong",null,"Propiedades disponibles:",-1)),d(" "+u(Object.keys(c(xe).user).join(", ")),1)])])])):o("",!0),i("div",E,[i("div",I,[i("div",j,[a[34]||(a[34]=i("h2",{class:"text-xl font-semibold mb-6"},"Información Personal",-1)),i("form",{onSubmit:m(Ee,["prevent"])},[c(xe).error?(n(),r("div",A,[i("div",M,[a[20]||(a[20]=i("i",{class:"fas fa-exclamation-triangle text-red-400 mr-2"},null,-1)),i("span",V,u(c(xe).error),1)])])):o("",!0),we.value?(n(),r("div",L,[i("div",R,[a[21]||(a[21]=i("i",{class:"fas fa-check-circle text-green-400 mr-2"},null,-1)),i("span",S,u(we.value),1)])])):o("",!0),i("div",D,[i("div",null,[a[22]||(a[22]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Nombre de Usuario",-1)),f(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>ke.username=e),type:"text",required:"",class:"input-field",placeholder:"Nombre de usuario"},null,512),[[p,ke.username]])]),i("div",null,[a[23]||(a[23]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Email",-1)),f(i("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>ke.email=e),type:"email",required:"",class:"input-field",placeholder:"tu@email.com"},null,512),[[p,ke.email]])]),i("div",null,[a[24]||(a[24]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Nombre en Minecraft",-1)),f(i("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>ke.minecraftUsername=e),type:"text",class:"input-field",placeholder:"Tu nombre de usuario en Minecraft"},null,512),[[p,ke.minecraftUsername]]),a[25]||(a[25]=i("p",{class:"text-xs text-gray-500 mt-1"}," Este nombre debe coincidir exactamente con tu nombre de usuario en Minecraft ",-1))]),i("div",null,[a[27]||(a[27]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Contraseña Actual",-1)),i("div",q,[f(i("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>ke.currentPassword=e),type:be.value?"text":"password",class:"input-field pl-10 pr-10",placeholder:"Ingresa tu contraseña actual"},null,8,z),[[x,ke.currentPassword]]),a[26]||(a[26]=i("i",{class:"fas fa-lock absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"},null,-1)),i("button",{type:"button",onClick:a[4]||(a[4]=e=>be.value=!be.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white"},[i("i",{class:b(be.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),i("div",null,[a[29]||(a[29]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Nueva Contraseña (Opcional)",-1)),i("div",B,[f(i("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>ke.newPassword=e),type:ve.value?"text":"password",class:"input-field pl-10 pr-10",placeholder:"Deja vacío para mantener la actual"},null,8,_),[[x,ke.newPassword]]),a[28]||(a[28]=i("i",{class:"fas fa-lock absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"},null,-1)),i("button",{type:"button",onClick:a[6]||(a[6]=e=>ve.value=!ve.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white"},[i("i",{class:b(ve.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),ke.newPassword?(n(),r("div",F,[a[31]||(a[31]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Confirmar Nueva Contraseña",-1)),i("div",G,[f(i("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>ke.confirmNewPassword=e),type:ge.value?"text":"password",class:"input-field pl-10 pr-10",placeholder:"Confirma tu nueva contraseña"},null,8,O),[[x,ke.confirmNewPassword]]),a[30]||(a[30]=i("i",{class:"fas fa-lock absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"},null,-1)),i("button",{type:"button",onClick:a[8]||(a[8]=e=>ge.value=!ge.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white"},[i("i",{class:b(ge.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])])):o("",!0),ke.newPassword?(n(),r("div",T,[i("div",Z,[i("i",{class:b([ke.newPassword.length>=6?"fas fa-check text-green-400":"fas fa-times text-red-400","mr-2"])},null,2),i("span",{class:b(ke.newPassword.length>=6?"text-green-400":"text-red-400")}," Mínimo 6 caracteres ",2)]),i("div",$,[i("i",{class:b([ke.newPassword===ke.confirmNewPassword&&ke.confirmNewPassword?"fas fa-check text-green-400":"fas fa-times text-red-400","mr-2"])},null,2),i("span",{class:b(ke.newPassword===ke.confirmNewPassword&&ke.confirmNewPassword?"text-green-400":"text-red-400")}," Las contraseñas coinciden ",2)])])):o("",!0),i("button",{type:"submit",disabled:c(xe).loading||!Ne.value,class:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed"},[c(xe).loading?(n(),r("div",J,[...a[32]||(a[32]=[i("div",{class:"spinner mr-2"},null,-1),d(" Actualizando... ",-1)])])):(n(),r("div",K,[...a[33]||(a[33]=[i("i",{class:"fas fa-save mr-2"},null,-1),d(" Guardar Cambios ",-1)])]))],8,H)])],32)])]),i("div",Q,[i("div",W,[a[39]||(a[39]=i("h3",{class:"text-lg font-semibold mb-4"},"Información de la Cuenta",-1)),i("div",X,[i("div",Y,[a[35]||(a[35]=i("span",{class:"text-gray-400"},"ID de Usuario",-1)),i("span",ee,u(c(xe).user.id?c(xe).user.id.slice(-8):"N/A"),1)]),i("div",ae,[a[36]||(a[36]=i("span",{class:"text-gray-400"},"Rol",-1)),i("span",{class:b([c(xe).isAdmin?"text-red-400":"text-green-400","capitalize"])},u(c(xe).user.role||"user"),3)]),i("div",se,[a[37]||(a[37]=i("span",{class:"text-gray-400"},"Miembro desde",-1)),i("span",null,u(Ce(c(xe).user.createdAt)),1)]),i("div",te,[a[38]||(a[38]=i("span",{class:"text-gray-400"},"Último acceso",-1)),i("span",null,u(Ce(c(xe).user.lastLogin)),1)])])]),i("div",le,[a[42]||(a[42]=i("h3",{class:"text-lg font-semibold mb-4"},"Balance",-1)),i("div",re,[i("div",ne," $"+u(c(xe).userBalance.toLocaleString("es-AR")),1),a[41]||(a[41]=i("p",{class:"text-gray-400 text-sm mb-4"},"Saldo disponible",-1)),g(s,{to:"/shop",class:"btn-primary w-full"},{default:y(()=>[...a[40]||(a[40]=[i("i",{class:"fas fa-store mr-2"},null,-1),d(" Ir a la Tienda ",-1)])]),_:1})])]),a[46]||(a[46]=v('<div class="card"><h3 class="text-lg font-semibold mb-4">Seguridad</h3><div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-gray-400">Contraseña</span><span class="text-green-400 text-sm"><i class="fas fa-check-circle mr-1"></i> Configurada </span></div><div class="flex items-center justify-between"><span class="text-sm text-gray-400">Autenticación 2FA</span><span class="text-gray-400 text-sm"><i class="fas fa-times-circle mr-1"></i> No disponible </span></div><button class="w-full btn-secondary text-sm"><i class="fas fa-shield-alt mr-2"></i> Configurar Seguridad </button></div></div>',1)),i("div",ie,[a[45]||(a[45]=i("h3",{class:"text-lg font-semibold mb-4 text-red-400"},"Zona de Peligro",-1)),i("div",oe,[i("button",{onClick:a[9]||(a[9]=e=>ye.value=!0),class:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-300"},[...a[43]||(a[43]=[i("i",{class:"fas fa-trash mr-2"},null,-1),d(" Eliminar Cuenta ",-1)])]),a[44]||(a[44]=i("p",{class:"text-xs text-gray-500"}," Esta acción no se puede deshacer. Se eliminarán todos tus datos permanentemente. ",-1))])])])])]),ye.value?(n(),r("div",ce,[i("div",de,[a[50]||(a[50]=i("h3",{class:"text-xl font-semibold mb-4 text-red-400"},"Eliminar Cuenta",-1)),a[51]||(a[51]=i("p",{class:"text-gray-300 mb-6"}," ¿Estás seguro de que quieres eliminar tu cuenta? Esta acción no se puede deshacer. ",-1)),i("div",ue,[i("div",null,[a[48]||(a[48]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Confirma tu contraseña",-1)),f(i("input",{"onUpdate:modelValue":a[10]||(a[10]=e=>he.value=e),type:"password",class:"input-field",placeholder:"Ingresa tu contraseña para confirmar"},null,512),[[p,he.value]])]),i("div",null,[a[49]||(a[49]=i("label",{class:"block text-sm font-medium text-gray-300 mb-2"},'Escribe "ELIMINAR" para confirmar',-1)),f(i("input",{"onUpdate:modelValue":a[11]||(a[11]=e=>Pe.value=e),type:"text",class:"input-field",placeholder:"ELIMINAR"},null,512),[[p,Pe.value]])])]),i("div",me,[i("button",{onClick:a[12]||(a[12]=e=>ye.value=!1),class:"flex-1 btn-secondary"}," Cancelar "),i("button",{onClick:Ie,disabled:!Ue.value,class:"flex-1 bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg transition-colors duration-300"}," Eliminar Cuenta ",8,fe)])])])):o("",!0)])}}};export{pe as default};
